# 基本计算器

给你一个字符串表达式 `s` ，请你实现一个基本计算器来计算并返回它的值。

注意:不允许使用任何将字符串作为数学表达式计算的内置函数，比如 `eval()` 。

 

**示例 1：**

```
输入：s = "1 + 1"
输出：2
```

**示例 2：**

```
输入：s = " 2-1 + 2 "
输出：3
```

**示例 3：**

```
输入：s = "(1+(4+5+2)-3)+(6+8)"
输出：23
```

 

**提示：**

- `1 <= s.length <= 3 * 105`
- `s` 由数字、`'+'`、`'-'`、`'('`、`')'`、和 `' '` 组成
- `s` 表示一个有效的表达式
- '+' 不能用作一元运算(例如， "+1" 和 `"+(2 + 3)"` 无效)
- '-' 可以用作一元运算(即 "-1" 和 `"-(2 + 3)"` 是有效的)
- 输入中不存在两个连续的操作符
- 每个数字和运行的计算将适合于一个有符号的 32位 整数



```c++
class Solution {
public:
    int calculate(string s) {
        stack<int>st;
        st.push(1);
        int res=0;
        int h=1;
        for(int i=0;i<s.size();i++)
        {
            if(s[i]=='+')
            {
                h=st.top();
            }
            else if(s[i]=='-')
            {
                h=-st.top();
            }
            else if(s[i]=='(')
            {
                st.push(h);
            }
            else if(s[i]==')')
            {
                st.pop();
            }
            else if(s[i]==' ')
            {
                continue;
            }
            else 
            {
                string tmp="";
                while(i<s.size()&&s[i]>='0'&&s[i]<='9')
                {
                    tmp+=s[i];
                    i++;
                }
                i--;
                res+=h*stoi(tmp);
            }
        }
        return res;
    }
};
```

