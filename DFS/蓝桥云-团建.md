# 树上路径的最长公共前缀

## 背景
小蓝和朋友们正在团建，玩一个两人合作的游戏。两人分别拿到一棵大小为 `n` 和 `m` 的树，每棵树上的每个节点有一个正整数权值。  
他们需要从各自树的根节点 `1` 出发，走向某个叶节点，从根到叶节点的路径上经过的所有节点权值构成一个正整数序列。两人的序列的最长公共前缀即为他们的得分。  
任务：给定两棵树，计算两人最多的得分。

## 输入格式
- **第一行**：两个正整数 `n, m`，用空格分隔，表示两棵树的大小。
- **第二行**：`n` 个正整数 `c1, c2, ..., cn`，用空格分隔，其中 `ci` 表示第一棵树节点 `i` 的权值。
- **第三行**：`m` 个正整数 `d1, d2, ..., dm`，用空格分隔，其中 `di` 表示第二棵树节点 `i` 的权值。
- **接下来 n-1 行**：每行两个正整数 `ui, vi`，表示第一棵树中节点 `ui` 和 `vi` 之间有一条边。
- **接下来 m-1 行**：每行两个正整数 `pi, qi`，表示第二棵树中节点 `pi` 和 `qi` 之间有一条边。

## 输出格式
- 输出一行，包含一个整数，表示两人能获得的最大得分（即最长公共前缀的长度）。

## 样例

### 样例输入 1
2 2
10 20
10 30
1 2
2 1

### 样例输出 1
1

### 样例输入 2
5 4
10 20 30 40 50
10 40 20 30
1 2
1 3
2 4
3 5
1 2
1 3
3 4

### 样例输出 2
2

## 样例说明
- **样例 1**：  
  - 第一棵树路径：`[10, 20]`  
  - 第二棵树路径：`[10, 30]`  
  - 最长公共前缀：`[10]`，长度为 `1`。

- **样例 2**：  
  - 第一棵树路径：`[10, 20, 40]`  
  - 第二棵树路径：`[10, 20, 30]`  
  - 最长公共前缀：`[10, 20]`，长度为 `2`。

## 算法思路（伪代码）
以下是一个基于深度优先搜索（DFS）的伪代码，用于计算两棵树从根到叶节点路径的最长公共前缀：




```
#include<iostream>
#include<vector>
using namespace std;
typedef long long ll;
const ll N=2e5+10;
ll n,m;//树大小
ll a[N],b[N];
vector<vector<ll> >k1(N);
vector<vector<ll> >k2(N);
ll pre=0;
void dfs(ll s1,ll f1,ll s2,ll f2,ll res)
{
	if(a[s1]!=b[s2])return;
	else//更新
	{
		pre=max(pre,res+1);//加上根节点
	}
	//往下搜
	for(ll i=0;i<k1[s1].size();i++)//树1当前节点可以到达的所有节点
	{
		for(ll j=0;j<k2[s2].size();j++)//树2当前节点可以到达的所有节点
		{
			ll v=k1[s1][i];
			ll u=k2[s2][j];
			if(v==f1||u==f2)//不搜父节点
			{
				continue;
			}
			dfs(v,s1,u,s2,res+1);
		}
	}
}

void slove()
{
	cin>>n>>m;
	for(ll i=1;i<=n;i++)cin>>a[i];
	for(ll i=1;i<=m;i++)cin>>b[i];
	
	for(ll i=1;i<n;i++)
	{
		ll q,p;
		cin>>q>>p;
		k1[q].push_back(p);//两个节点互通
		k1[p].push_back(q);
	}
	for(ll i=1;i<m;i++)
	{
		ll q,p;
		cin>>q>>p;
		k2[q].push_back(p);//两个节点互通
		k2[p].push_back(q);
	}
	if(a[1]!=b[1])//特判
	{
		cout<<"0";
		return;
	}
	dfs(1,0,1,0,0);//树1节点 树1节点的父亲  树2节点 树2节点的父亲  最长公共部分
	cout<<pre;
	return;
}

signed main()
{
	ios::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);
	slove();
	return 0;
}
```
思路分析在CSDN  https://blog.csdn.net/2401_87117051?spm=1010.2135.3001.5343
